<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV Corporativa Moderna</title>
    <link href="https://fonts.googleapis.com/css2?family=Dosis:wght@500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="grid-container">
        <section class="not_interna" id="secao-noticia">
            <div class="conteudo-noticia">
                <img id="noticia-imagem" src="placeholder.jpg" alt="Imagem da Notícia">
                <h3 id="noticia-titulo">Carregando Notícia...</h3>
                <p id="noticia-texto"></p>
            </div>
        </section>

        <section class="video" id="secao-video">
            <div id="video-container" class="embed-container">
                <p>Carregando Vídeo...</p>
            </div>
        </section>

        <section class="aniversariante" id="secao-aniversariante">
            <canvas id="confetti-canvas" class="confetti-overlay"></canvas>
            <div class="avatar-aniversariante">
                <img id="aniversariante-foto" src="https://via.placeholder.com/100?text=TV" alt="Foto Aniversariante">
                <span class="icone-presente"><i class="fas fa-gift"></i></span>
            </div>
            <h3 id="aniversariante-nome">Carregando...</h3>
            <p id="aniversariante-data"></p>
            <p id="aniversariante-setor"></p>
        </section>

        <section class="dollar_hoje" id="secao-cambio">
            <h3><i class="fas fa-dollar-sign"></i> Câmbio</h3> 
             <div id="cambio-valor">Carregando...</div> </section>

        <section class="hora_mundial" id="secao-horarios">
            <h3><i class="far fa-clock"></i> Horários</h3>
            <div id="hora-brasil"></div>
            <div id="hora-ny"></div>
            <div id="hora-hk"></div>
        </section>

        <section class="prev_tempo" id="secao-tempo">
            <h3><i class="fas fa-cloud-sun"></i> Tempo</h3>
            <div id="tempo-local">São José do Rio Preto</div>
    
            <div class="tempo-atual-wrapper">
            <div id="tempo-temp">Carregando...</div>
            <div id="tempo-descricao"></div>
            </div>
    
            <div id="tempo-previsao-lista"></div>
        </section>
    </div>

<script src="js/sheets_config.js"></script>
<script src="js/aniversariante.js"></script>
<script src="js/noticia.js"></script>
<script src="js/video.js"></script>
<script src="js/cambio.js"></script>
<script src="js/tempo.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
    // Definição do tempo de atualização
    const ATUALIZACAO_MINUTOS = 2; 
    const ATUALIZACAO_MS = ATUALIZACAO_MINUTOS * 60 * 1000;

    /**
     * Função que carrega todos os dados estáticos/API
     */
    function loadAllData() {
        console.log("Carregando todos os dados...");
        
        // Chamadas dos seus scripts
        if (typeof fetchAniversariantesDoMes === 'function') fetchAniversariantesDoMes();
        if (typeof fetchNoticias === 'function') fetchNoticias();
        if (typeof loadVideo === 'function') loadVideo();
        if (typeof fetchCambioData === 'function') fetchCambioData();
        if (typeof loadTempo === 'function') loadTempo();
    }
    
    // Novo bloco de inicialização
    document.addEventListener('DOMContentLoaded', () => {
        // 1. Inicia o relógio em tempo real (a cada 1s) - Assume que está em tempo.js
        if (typeof startClockLoop === 'function') {
            startClockLoop(); 
            console.log("Relógio iniciado.");
        }
        
        // 2. Primeira carga de todos os outros dados
        loadAllData();
        
        // 3. Loop de atualização dos dados
        setInterval(loadAllData, ATUALIZACAO_MS);
        
        // 4. Recarga forçada da página (6 horas)
        setInterval(() => { 
            console.log("Recarregando página para garantir a estabilidade...");
            window.location.reload(); 
        }, 6 * 60 * 60 * 1000);
    });

</script>
</body>
</html>